---
import Heading from "../components/Heading.astro";
---

<!-- INFO SLIDER -->
<div class="carousel w-full max-w-6xl mx-auto p-6">
  <!-- SLIDE 1 -->
  <div id="info1" class="carousel-item relative w-full">
    <div class="w-full rounded-xl border-2 border-primaryblue60 bg-beige p-10">
      <!-- Arrows -->
      <div class="absolute right-6 top-6 flex gap-3">
        <a
          href="#info2"
          class="hover:bg-primaryblue60 hover:text-beige transition-colors duration-200
           w-10 h-10 flex items-center justify-center border-2 border-primaryblue60 rounded-full text-primaryblue60"
        >
          ←
        </a>
        <a
          href="#info2"
          class="hover:bg-primaryblue60 hover:text-beige transition-colors duration-200 w-10 h-10 flex items-center justify-center border-2 border-primaryblue60 rounded-full text-primaryblue60"
        >
          →
        </a>
      </div>

      <!-- Content -->
      <Heading htmlheading="h3" size="medium">Vores vision</Heading>

      <p class="leading-relaxed mt-4 max-w-3xl">
        UngTilUng’s vision er at unge i alderen 18-35 år skal trives i deres
        liv, og have værktøjer og ressourcer til at håndtere hverdagens og
        livets udfordringer. UngTilUng vil skabe et online univers, hvor unge
        kan dele deres udfordringer, tanker og følelser, samt give dem
        muligheden for at arbejde med sig selv gennem digitale initiativer og
        sunde fællesskaber.
      </p>
      <p class="mt-4 leading-relaxed max-w-3xl">
        Vi ønsker, at unge har mulighed for at lære af hinanden, støtte hinanden
        og have et fællesskab, hvor de kan skabe nye, sunde relationer. Alle
        unge skal vide, at de kan få hjælp til at håndtere deres udfordringer,
        og at de ikke er alene. Det skal ikke være tabubelagt at søge hjælp, men
        tværtimod noget at være stolt af. De unge skal vide, at de altid kan gå
        til UngTilUng.com og få hjælp og støtte fra andre unge og fra UngTilUngs
        mange frivillige.
      </p>
    </div>
  </div>

  <!-- SLIDE 2 -->
  <div id="info2" class="carousel-item relative w-full">
    <div class="w-full rounded-xl border-2 border-primaryblue60 bg-beige p-10">
      <!-- Arrows -->
      <div class="absolute right-6 top-6 flex gap-3">
        <a
          href="#info1"
          class="hover:bg-primaryblue60 hover:text-beige transition-colors duration-200 w-10 h-10 flex items-center justify-center border-2 border-primaryblue60 rounded-full text-primaryblue60"
        >
          ←
        </a>
        <a
          href="#info1"
          class="hover:bg-primaryblue60 hover:text-beige transition-colors duration-200 w-10 h-10 flex items-center justify-center border-2 border-primaryblue60 rounded-full text-primaryblue60"
        >
          →
        </a>
      </div>

      <!-- Content -->
      <Heading htmlheading="h3" size="medium">Vores mission</Heading>

      <p class="mt-4 font-bold leading-relaxed max-w-3xl">
        Vi hjælper unge gennem tre digitale tilbud:
      </p>
      <ul
        class="mt-3 list-inside list-disc space-y-2 text-slate-700 text-sm md:text-base"
      >
        <li>
          Anonym chatrådgivning – åben hver dag kl. 16–20 med frivillige, der
          møder de unge der, hvor de er. Akkrediteret af Rådgivning Danmark.
        </li>
        <li>
          Digitale samtaleforløb – 10 møder med en frivillig rådgiver efter et
          program med samtaler, øvelser og ressourcer.
        </li>
        <li>
          Digitale fællesskaber – 10 ugers forløb, hvor unge mødes om fælles
          interesser og støttes af frivillige.
        </li>
      </ul>
      <p class="mt-4 leading-relaxed max-w-3xl">
        Alle frivillige uddannes, så de kan give både forståelse og konkrete
        værktøjer. Vi skaber et trygt digitalt fællesskab, hvor unge kan dele
        udfordringer, få støtte og føle sig hørt – og dermed komme tættere på
        deres egne mål.
      </p>
    </div>
  </div>
</div>

<!-- DOTS -->
<div class="flex justify-center gap-4 mt-4">
  <a
    href="#info1"
    class="info-dot w-3 h-3 rounded-full bg-primaryblue60"
    aria-label="Gå til slide 1"></a>
  <a
    href="#info2"
    class="info-dot w-3 h-3 rounded-full border-2 border-primaryblue60 bg-transparent"
    aria-label="Gå til slide 2"></a>
</div>

<script>
  (function () {
    // Find slides dynamisk (alle elementer med .carousel-item)
    const slideEls = Array.from(document.querySelectorAll(".carousel-item"));
    if (!slideEls.length) return;

    // Byg slideIds i samme rækkefølge som DOM
    const slideIds = slideEls.map((el) => "#" + el.id);

    // Find dots (kun de specifikke prikker)
    const dots = Array.from(document.querySelectorAll(".info-dot"));

    // Safety: dots skal matche antal slides - ellers fortsæt, men log
    if (dots.length !== slideIds.length) {
      console.warn("Antal dots matcher ikke antal slides:", {
        slides: slideIds.length,
        dots: dots.length,
      });
    }

    // Hjælpefunktion: sæt aktiv ud fra index
    function setActiveIndex(activeIndex) {
      // bounds check
      const idx = Math.max(0, Math.min(activeIndex, slideIds.length - 1));

      slideIds.forEach((id, i) => {
        const slide = document.querySelector(id);
        if (!slide) return;
        if (i === idx) {
          slide.classList.remove("hidden");
        } else {
          slide.classList.add("hidden");
        }
      });

      // Opdater dots: match ved index - hvis der er færre dots end slides, undgå fejl
      dots.forEach((dot, i) => {
        if (i === idx) {
          dot.classList.add("bg-primaryblue60");
          dot.classList.remove("border-2", "bg-transparent");
        } else {
          dot.classList.remove("bg-primaryblue60");
          dot.classList.add("border-2", "bg-transparent");
        }
      });
    }

    // Find active index ud fra hash (eller 0 hvis ingen)
    function getActiveIndexFromHash() {
      const hash = window.location.hash || "";
      const idx = slideIds.indexOf(hash);
      return idx !== -1 ? idx : 0;
    }

    // Initial sæt
    setActiveIndex(getActiveIndexFromHash());

    // Når hash ændres (pile eller browser navigation)
    window.addEventListener("hashchange", () => {
      setActiveIndex(getActiveIndexFromHash());
    });

    // Gør dots klikbare: opdater hash via history.replaceState for ikke at scrolle
    dots.forEach((dot, i) => {
      dot.addEventListener("click", (e) => {
        e.preventDefault();
        const targetHash =
          dot.getAttribute("href") || slideIds[i] || slideIds[0];
        // Opdater URL hash uden automatisk scroll
        history.replaceState(null, "", targetHash);
        // Sæt aktivt slide
        setActiveIndex(i);
      });
    });

    // (Valgfrit) gør pile-links mere præcise hvis du ønsker at undgå browser-scroll:
    // Vi lytter på klik på pile-anchors inde i carousel og opdaterer via history.replaceState
    const arrowAnchors = Array.from(
      document.querySelectorAll('.carousel a[href^="#"]')
    );
    arrowAnchors.forEach((a) => {
      a.addEventListener("click", (e) => {
        // lad browser opdatere hash som normalt — vi håndterer hashchange ovenfor
        // hvis du vil undgå scroll, uncomment nedenstående lines:
        // e.preventDefault();
        // const target = a.getAttribute('href');
        // history.replaceState(null, '', target);
        // setActiveIndex(slideIds.indexOf(target));
      });
    });
  })();
</script>
