<section class="max-w-4xl mx-auto px-6 py-12">
  <div id="testimonial-slider" class="relative">
    <!-- Arrow controls (øverst højre) -->
    <div class="absolute top-4 right-4 flex items-center gap-3 z-30">
      <button
        id="prevBtn"
        aria-label="Previous"
        class="w-10 h-10 rounded-full border-2 border-[color:var(--color-primaryblue100,#131952)] flex items-center justify-center text-[color:var(--color-primaryblue100,#131952)] bg-white/60 hover:bg-white"
      >
        <span aria-hidden="true">←</span>
      </button>

      <button
        id="nextBtn"
        aria-label="Next"
        class="w-10 h-10 rounded-full border-2 border-[color:var(--color-primaryblue100,#131952)] flex items-center justify-center text-[color:var(--color-primaryblue100,#131952)] bg-white/60 hover:bg-white"
      >
        <span aria-hidden="true">→</span>
      </button>
    </div>

    <!-- Slides wrapper -->
    <div class="relative overflow-hidden min-h-[280px]">
      <!-- Slide 0 -->
      <div
        class="slide absolute inset-0 transition-opacity duration-500 ease-in-out opacity-0 pointer-events-none"
        data-index="0"
        role="group"
        aria-roledescription="slide"
        aria-label="Slide 1"
      >
        <div
          class="mx-auto max-w-4xl rounded-[14px] border-2 border-[color:var(--color-primaryblue100,#131952)] bg-[color:var(--color-beige,#fbf7f2)] p-8 md:p-10 text-left min-h-[280px] flex flex-col justify-between"
        >
          <div>
            <h3
              class="text-[color:var(--color-primaryblue100,#131952)] text-2xl md:text-3xl font-semibold mb-4"
            >
              Snak med os anonymt
            </h3>
            <p
              class="text-[color:var(--color-primaryblue60,#394df7)] leading-relaxed text-base md:text-lg"
            >
              Du mellem 16-35 år. Du er anonym og kan derfor fortælle præcis,
              hvordan du har det. I chatten kan du vende stort og småt. Om det
              er ensomhed, angst/nervøsitet, kæreste­sorg, tristhed eller lavt
              selvværd. Frivillige sidder klar og kan give dig støtte og andre
              øjne på det du går rundt med. Chatten kan give dig rum til det,
              der ellers kan føles svært at tale om.
            </p>
          </div>

          <div class="mt-6 flex flex-col items-center">
            <p
              class="hidden md:block text-sm text-[color:var(--color-primaryblue80,#2632a5)] mb-4"
            >
              Obs: chatten har åbningstider — vi gør vores bedste
            </p>
            <a
              href="/chat"
              class="inline-block bg-[color:var(--color-orange60,#f59e0b)] text-[color:var(--color-beige,#fbf7f2)] py-2 px-6 rounded-full border-2 border-[color:var(--color-orange100,#f97316)] hover:brightness-95"
            >
              Læs mere
            </a>
          </div>
        </div>
      </div>

      <!-- Slide 1 -->
      <div
        class="slide absolute inset-0 transition-opacity duration-500 ease-in-out opacity-0 pointer-events-none"
        data-index="1"
        role="group"
        aria-roledescription="slide"
        aria-label="Slide 2"
      >
        <div
          class="mx-auto max-w-4xl rounded-[14px] border-2 border-[color:var(--color-primaryblue100,#131952)] bg-[color:var(--color-beige,#fbf7f2)] p-8 md:p-10 text-left min-h-[280px] flex flex-col justify-between"
        >
          <div>
            <h3
              class="text-[color:var(--color-primaryblue100,#131952)] text-2xl md:text-3xl font-semibold mb-4"
            >
              Et andet testimonial
            </h3>
            <p
              class="text-[color:var(--color-primaryblue60,#394df7)] leading-relaxed text-base md:text-lg"
            >
              “Det var rart at tale med nogen, der forstod mig” — her kan du
              skrive anden tekst der beskriver oplevelsen eller fordelene.
            </p>
          </div>

          <div class="mt-6 flex flex-col items-center">
            <a
              href="/andet"
              class="inline-block bg-[color:var(--color-orange60,#f59e0b)] text-[color:var(--color-beige,#fbf7f2)] py-2 px-6 rounded-full border-2 border-[color:var(--color-orange100,#f97316)] hover:brightness-95"
            >
              Læs mere
            </a>
          </div>
        </div>
      </div>

      <!-- Slide 2 -->
      <div
        class="slide absolute inset-0 transition-opacity duration-500 ease-in-out opacity-0 pointer-events-none"
        data-index="2"
        role="group"
        aria-roledescription="slide"
        aria-label="Slide 3"
      >
        <div
          class="mx-auto max-w-4xl rounded-[14px] border-2 border-[color:var(--color-primaryblue100,#131952)] bg-[color:var(--color-beige,#fbf7f2)] p-8 md:p-10 text-left min-h-[280px] flex flex-col justify-between"
        >
          <div>
            <h3
              class="text-[color:var(--color-primaryblue100,#131952)] text-2xl md:text-3xl font-semibold mb-4"
            >
              Endnu et testimonial
            </h3>
            <p
              class="text-[color:var(--color-primaryblue60,#394df7)] leading-relaxed text-base md:text-lg"
            >
              “Jeg fik gode værktøjer til mine næste skridt” — kort tekst som
              giver kontekst.
            </p>
          </div>

          <div class="mt-6 flex flex-col items-center">
            <a
              href="/værktøjer"
              class="inline-block bg-[color:var(--color-orange60,#f59e0b)] text-[color:var(--color-beige,#fbf7f2)] py-2 px-6 rounded-full border-2 border-[color:var(--color-orange100,#f97316)] hover:brightness-95"
            >
              Læs mere
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Dots -->
    <div id="dots" class="flex items-center justify-center gap-3 mt-6">
      <button
        class="dot w-3 h-3 rounded-full border-2 border-[color:var(--color-primaryblue100,#131952)]"
        aria-label="Go to slide 1"></button>
      <button
        class="dot w-3 h-3 rounded-full border-2 border-[color:var(--color-primaryblue100,#131952)]"
        aria-label="Go to slide 2"></button>
      <button
        class="dot w-3 h-3 rounded-full border-2 border-[color:var(--color-primaryblue100,#131952)]"
        aria-label="Go to slide 3"></button>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const slider = document.getElementById("testimonial-slider");
    if (!slider) return console.warn("Slider: element not found");

    const slides = Array.from(slider.querySelectorAll(".slide"));
    const dots = Array.from(slider.querySelectorAll("#dots .dot"));
    const prev = document.getElementById("prevBtn");
    const next = document.getElementById("nextBtn");

    if (!slides.length || !dots.length)
      return console.warn("Slider: slides or dots missing");

    let index = 0;
    let animating = false;

    function setActive(i) {
      if (animating) return;
      animating = true;
      index = (i + slides.length) % slides.length;

      slides.forEach((s, idx) => {
        if (idx === index) {
          s.classList.remove("opacity-0", "pointer-events-none");
          s.classList.add("opacity-100");
        } else {
          s.classList.remove("opacity-100");
          s.classList.add("opacity-0", "pointer-events-none");
        }
      });

      dots.forEach((d, idx) => {
        if (idx === index) {
          d.classList.add("bg-[color:var(--color-primaryblue100,#131952)]");
        } else {
          d.classList.remove("bg-[color:var(--color-primaryblue100,#131952)]");
        }
      });

      // prevent rapid clicking during transition
      setTimeout(() => (animating = false), 520);
    }

    // init
    slides.forEach((s, i) => {
      s.classList.add("transition-opacity", "duration-500");
      if (i === 0) {
        s.classList.add("opacity-100");
      } else {
        s.classList.add("opacity-0", "pointer-events-none");
      }
    });

    dots.forEach((d, i) => {
      d.addEventListener("click", () => setActive(i));
      if (i === 0)
        d.classList.add("bg-[color:var(--color-primaryblue100,#131952)]");
    });

    prev && prev.addEventListener("click", () => setActive(index - 1));
    next && next.addEventListener("click", () => setActive(index + 1));

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") setActive(index - 1);
      if (e.key === "ArrowRight") setActive(index + 1);
    });
  });
</script>
